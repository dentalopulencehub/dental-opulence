import { useRef, useState } from "react";
import { FormProps } from "../../../../types";


const FormSix = ({ handleStepChange, handleOptionSelect, handleOptionDeselect }: FormProps) => {
  const [images, setImages] = useState<any>([])
  const fileInputRef = useRef<HTMLInputElement>(null); // Use useRef with input element

  const onClickIcon = () => {
    fileInputRef?.current?.click();
};

  const selectImage = (file: any) => {
    console.log({file})
    try {
        if (file.type.startsWith('image/')) {
            const imageUrl = URL.createObjectURL(file);
            setImages([...images, { file, imageUrl,}])
        } else {
            console.log('wrong format')
        }
    } catch (error) {
        console.log({ error })
    }
};
const deleteImage = (index: number) => { // Index of the item to delete
  const newArray = images.slice(0, index).concat(images.slice(index + 1));
  setImages(newArray)
}
  const [selectedIndex, setSelectedIndex] = useState<number[]>([]);
  return (
    <div className="flex  mx-4 flex-col gap-4 md:gap-10 text-center" data-aos="fade-left">
      <input
            onChange={(e) => {
                console.log('start')
                if (fileInputRef?.current?.files)
                    selectImage(
                        fileInputRef?.current?.files[0]
                    );
            }}
            ref={fileInputRef}
            className={'hidden'}
            type={'file'}
            accept="image/png, image/jpeg, image/jpg"
        />
         <div className="flex flex-col gap-2">
        <h1 className="bold text-lg md:text-4xl xl:text-7xl text-white">
          Upload  your Current Smile
        </h1>
        <p className=" font-normal text-base md:text-2xl text-[#A2A2A2]">
          Please upload three smile photos: one from the front and one from each side (left and right), with a focus on biting down on your back teeth.
        </p>
      </div>
     <div>
     <div onClick={onClickIcon} className="border cursor-pointer border-[#FFFFFF33] flex py-6 md:py-12 rounded-xl gap-4 flex-col items-center bg-[#FFFFFF33]">
        <div>
          <svg width="50" height="50" viewBox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path opacity="0.8" d="M45.3481 24.9997C45.3481 36.2381 36.2376 45.3486 24.9992 45.3486C13.7609 45.3486 4.65039 36.2381 4.65039 24.9997C4.65039 13.7614 13.7609 4.65088 24.9992 4.65088C36.2376 4.65088 45.3481 13.7614 45.3481 24.9997ZM5.87132 24.9997C5.87132 35.5638 14.4352 44.1276 24.9992 44.1276C35.5633 44.1276 44.1271 35.5638 44.1271 24.9997C44.1271 14.4357 35.5633 5.87181 24.9992 5.87181C14.4352 5.87181 5.87132 14.4357 5.87132 24.9997Z" fill="#CFD4D9" />
            <path opacity="0.2" d="M50 25C50 38.8071 38.8071 50 25 50C11.1929 50 0 38.8071 0 25C0 11.1929 11.1929 0 25 0C38.8071 0 50 11.1929 50 25ZM0.25 25C0.25 38.669 11.331 49.75 25 49.75C38.669 49.75 49.75 38.669 49.75 25C49.75 11.331 38.669 0.25 25 0.25C11.331 0.25 0.25 11.331 0.25 25Z" fill="#CFD4D9" />
            <path opacity="0.5" d="M47.0913 24.9983C47.0913 37.1999 37.1999 47.0913 24.9983 47.0913C12.7967 47.0913 2.90527 37.1999 2.90527 24.9983C2.90527 12.7967 12.7967 2.90527 24.9983 2.90527C37.1999 2.90527 47.0913 12.7967 47.0913 24.9983ZM3.1262 24.9983C3.1262 37.0779 12.9187 46.8704 24.9983 46.8704C37.0779 46.8704 46.8704 37.0779 46.8704 24.9983C46.8704 12.9187 37.0779 3.1262 24.9983 3.1262C12.9187 3.1262 3.1262 12.9187 3.1262 24.9983Z" fill="#CFD4D9" />
            <path d="M25.6871 24.3117C25.506 24.1341 25.2625 24.0347 25.0088 24.0347C24.7552 24.0347 24.5117 24.1341 24.3305 24.3117L21.4236 27.1217C21.3207 27.2066 21.2365 27.3117 21.1762 27.4306C21.1159 27.5495 21.0807 27.6795 21.0729 27.8126C21.0652 27.9457 21.0849 28.0789 21.131 28.204C21.1771 28.3291 21.2484 28.4433 21.3407 28.5396C21.4329 28.6358 21.544 28.712 21.667 28.7634C21.7901 28.8147 21.9223 28.8401 22.0556 28.838C22.1889 28.8359 22.3203 28.8063 22.4417 28.7511C22.563 28.6959 22.6716 28.6162 22.7608 28.5171L24.0302 27.2865V32.7516C24.0302 33.0086 24.1322 33.255 24.314 33.4368C24.4957 33.6185 24.7421 33.7206 24.9991 33.7206C25.2561 33.7206 25.5026 33.6185 25.6843 33.4368C25.866 33.255 25.9681 33.0086 25.9681 32.7516V27.3349L27.2181 28.5946C27.3082 28.6854 27.4154 28.7575 27.5335 28.8067C27.6515 28.8559 27.7782 28.8812 27.9061 28.8812C28.034 28.8812 28.1607 28.8559 28.2788 28.8067C28.3969 28.7575 28.504 28.6854 28.5941 28.5946C28.6849 28.5045 28.757 28.3974 28.8062 28.2793C28.8554 28.1612 28.8807 28.0345 28.8807 27.9066C28.8807 27.7787 28.8554 27.6521 28.8062 27.534C28.757 27.4159 28.6849 27.3087 28.5941 27.2186L25.6871 24.3117Z" fill="#D9DDE1" />
            <path d="M30.4929 20.1546C30.0975 19.0122 29.3558 18.0214 28.3711 17.3202C27.3864 16.619 26.2076 16.2422 24.9987 16.2422C23.7898 16.2422 22.611 16.619 21.6263 17.3202C20.6416 18.0214 19.8999 19.0122 19.5045 20.1546C18.6339 20.2712 17.8114 20.6223 17.125 21.1703C16.4385 21.7183 15.914 22.4426 15.6074 23.2657C15.3008 24.0888 15.2238 24.9798 15.3846 25.8433C15.5453 26.7069 15.9378 27.5105 16.52 28.1681C16.5904 28.292 16.6871 28.3989 16.8035 28.4811C16.9198 28.5633 17.0528 28.6188 17.1931 28.6438C17.3333 28.6687 17.4773 28.6624 17.6149 28.6253C17.7524 28.5883 17.8801 28.5213 17.9888 28.4293C18.0975 28.3372 18.1846 28.2223 18.2439 28.0928C18.3031 27.9632 18.3331 27.8222 18.3316 27.6798C18.3302 27.5374 18.2973 27.397 18.2354 27.2687C18.1735 27.1404 18.0841 27.0273 17.9735 26.9375C17.5986 26.5184 17.3533 25.9995 17.2674 25.4438C17.1814 24.8881 17.2585 24.3194 17.4893 23.8066C17.72 23.2938 18.0946 22.8589 18.5675 22.5547C19.0404 22.2505 19.5914 22.0899 20.1537 22.0926H20.2506C20.4773 22.0971 20.6985 22.0221 20.8755 21.8804C21.0526 21.7388 21.1743 21.5395 21.2196 21.3174C21.3976 20.4412 21.8729 19.6534 22.5652 19.0876C23.2574 18.5218 24.124 18.2127 25.0181 18.2127C25.9122 18.2127 26.7787 18.5218 27.471 19.0876C28.1633 19.6534 28.6386 20.4412 28.8165 21.3174C28.8618 21.5395 28.9836 21.7388 29.1607 21.8804C29.3377 22.0221 29.5588 22.0971 29.7855 22.0926H29.8437C30.406 22.0899 30.957 22.2505 31.4299 22.5547C31.9028 22.8589 32.2774 23.2938 32.5081 23.8066C32.7389 24.3194 32.816 24.8881 32.73 25.4438C32.6441 25.9995 32.3988 26.5184 32.0239 26.9375C31.9385 27.0332 31.873 27.1449 31.8312 27.2662C31.7893 27.3874 31.7719 27.5157 31.7801 27.6437C31.7882 27.7717 31.8216 27.8968 31.8784 28.0118C31.9353 28.1268 32.0144 28.2293 32.1111 28.3135C32.2878 28.4693 32.5151 28.5554 32.7506 28.5557C32.8882 28.5556 33.0242 28.5261 33.1495 28.4693C33.2748 28.4125 33.3866 28.3296 33.4774 28.2263C34.0758 27.5697 34.4821 26.7613 34.652 25.8894C34.8219 25.0175 34.7489 24.1156 34.4408 23.2824C34.1327 22.4493 33.6015 21.7168 32.9053 21.1652C32.209 20.6135 31.3745 20.2639 30.4929 20.1546Z" fill="#D9DDE1" />
          </svg>
        </div>

        <div>
          <p className="text-white text-xs md:text-base font-normal">Drag and Drop (or) <span className="text-orange-200 font-semibold">Choose Files</span></p>
        </div>
      </div>
      <div className="flex flex-col md:flex-row gap-2 md:gap-4 mt-2 md:mt-4">
        {images.map((image:any, index:number)=> <button onClick={()=>deleteImage(index)} key={index} className="bg-[#FFFFFF33] w-full  items-center justify-center px-8 py-2 md:py-4 border border-[#FFFFFF33] flex gap-2  rounded-lg">
          <p className="text-white text-xs md:text-base font-normal">{image.file.name}</p>
          <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M3.16699 6.38597C3.16699 5.90152 3.51237 5.50879 3.93842 5.50879L6.60266 5.50832C7.13202 5.49306 7.59901 5.11033 7.77913 4.54412C7.78387 4.52923 7.78931 4.51087 7.80885 4.44424L7.92364 4.05256C7.99389 3.81241 8.0551 3.60318 8.14074 3.41617C8.47908 2.67736 9.10507 2.16432 9.82846 2.03297C10.0116 1.99972 10.2055 1.99986 10.4281 2.00002H13.9061C14.1287 1.99986 14.3226 1.99972 14.5057 2.03297C15.2291 2.16432 15.8551 2.67736 16.1934 3.41617C16.2791 3.60318 16.3403 3.81241 16.4105 4.05256L16.5253 4.44424C16.5448 4.51087 16.5503 4.52923 16.555 4.54412C16.7351 5.11033 17.2948 5.49353 17.8241 5.50879H20.3956C20.8216 5.50879 21.167 5.90152 21.167 6.38597C21.167 6.87043 20.8216 7.26316 20.3956 7.26316H3.93842C3.51237 7.26316 3.16699 6.87043 3.16699 6.38597Z" fill="#CD2020" />
            <path fill-rule="evenodd" clip-rule="evenodd" d="M11.7626 22H12.5714C15.3541 22 16.7455 22 17.6501 21.1141C18.5547 20.2281 18.6473 18.7749 18.8324 15.8685L19.0991 11.6806C19.1996 10.1036 19.2498 9.31511 18.7959 8.81545C18.3421 8.31579 17.5757 8.31579 16.0429 8.31579H8.29104C6.75826 8.31579 5.99187 8.31579 5.53804 8.81545C5.08421 9.31511 5.13443 10.1036 5.23487 11.6806L5.50158 15.8685C5.68669 18.7749 5.77924 20.2281 6.68388 21.1141C7.58852 22 8.97988 22 11.7626 22ZM15.4133 12.3456C15.4545 11.9117 15.1538 11.5249 14.7416 11.4815C14.3295 11.4381 13.9619 11.7546 13.9207 12.1885L13.4207 17.4516C13.3795 17.8855 13.6802 18.2724 14.0924 18.3157C14.5045 18.3591 14.8721 18.0426 14.9133 17.6087L15.4133 12.3456ZM9.59236 11.4815C10.0045 11.4381 10.3721 11.7546 10.4133 12.1885L10.9133 17.4516C10.9545 17.8855 10.6538 18.2724 10.2416 18.3157C9.82946 18.3591 9.46193 18.0426 9.42071 17.6087L8.92071 12.3456C8.8795 11.9117 9.18021 11.5249 9.59236 11.4815Z" fill="#CD2020" />
          </svg>
        </button>)}
      </div>
     </div>

      <div>
        <button onClick={() => {
          handleStepChange("lastForm");
        }} type='button' className="text-white font-medium text-xs md:text-base rounded-full px-4 md:px-12 py-2 md:py-4 border-white border">Next</button>
      </div>
    </div>
  );
};

export default FormSix;

